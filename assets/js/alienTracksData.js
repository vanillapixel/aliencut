const remixesData = {
	october20: {
		id: "oct20-1",
		date: {
			month: "ottobre",
			year: 2020,
		},
		songs: [
			{
				id: "oct20-g1-s1",
				artists: ["Karretta El Gucci"],
				title: "Fake Capo",
				remixArtists: ["Alien Cut"],
				link: "",
			},
			{
				id: "oct20-g1-s2",
				artists: ["Carla"],
				title: "Bim Bam Toi",
				remixArtists: ["Alien Cut"],
				link: "",
			},
			{
				id: "oct20-g1-s3",
				artists: ["Madison Beer"],
				title: "Good in Goodbye",
				remixArtists: ["Alien Cut"],
				link: "",
			},
		],
		paypalCode: `EHN8G9PQQRGU8`,
	},
	november20: {
		id: "nov20-1",
		date: {
			month: "novembre",
			year: 2020,
		},
		songs: [
			{
				id: "nov20-g1-s1",
				artists: ["Purple Disco Machine", "Sophie and the Giants"],
				title: "Hypnotized",
				remixArtists: ["Alien Cut"],
				link: "",
			},
			{
				id: "nov20-g1-s2",
				artists: ["Ilona"],
				title: "Un monde parfait",
				remixArtists: ["Alien Cut"],
				link: "",
			},
			{
				id: "nov20-g1-s3",
				artists: ["Cascada"],
				title: "Night Nurse",
				remixArtists: ["Alien Cut"],
				link: "",
			},
		],
		paypalCode: `B5WU5F38KSGMJ`,
	},
	december20: {
		id: "dic20-1",
		date: {
			month: "dicembre",
			year: 2020,
		},
		songs: [
			{
				id: "dic20-g1-s1",
				artists: ["Mabel"],
				title: "Bum Bum",
				remixArtists: ["Alien Cut", "Vixen"],
				link: "",
			},
			{
				id: "dic20-g1-s2",
				artists: ["DJane HouseKat", "Rameez"],
				title: "Ass Up",
				remixArtists: ["Alien Cut"],
				link: "",
			},
			{
				id: "dic20-g1-s3",
				artists: ["Alien Cut", "Mannaggia"],
				title: "Ci siamo rotti il cazzo",
				remixArtists: [],
				link: "",
			},
		],
		paypalCode: `4BBS27AF6RRJC`,
	},
	january21: {
		id: "gen21-1",
		date: {
			month: "gennaio",
			year: 2021,
		},
		songs: [
			{
				id: "gen21-g1-s1",
				artists: ["Piero Pelú"],
				title: "Toro loco",
				remixArtists: ["Alien Cut", "Miky Le Cause"],
				link: "",
			},
			{
				id: "gen21-g1-s2",
				artists: ["Pleasurekraft"],
				title: "Carny",
				remixArtists: ["Alien Cut"],
				link: "",
			},
			{
				id: "gen21-g1-s3",
				artists: ["Comaneci"],
				title: "Satisfied Girl",
				remixArtists: ["Alien Cut"],
				link: "",
			},
		],
		paypalCode: `R4BXRNSF9L2E4`,
	},

	february21: {
		id: "feb21-1",
		date: {
			month: "febbraio",
			year: 2021,
		},
		songs: [
			{
				id: "feb21-g1-s1",
				artists: ["Worakls"],
				title: "Porto",
				remixArtists: ["Alien Cut"],
				link: "",
			},
			{
				id: "feb21-g1-s2",
				artists: ["Depeche Mode"],
				title: "Personal Jesus",
				remixArtists: ["Alien Cut"],
				link: "",
			},
			{
				id: "feb21-g1-s3",
				artists: ["Dj Satomi"],
				title: "Castle in the Sky",
				remixArtists: ["Alien Cut"],
				link: "",
			},
		],
		paypalCode: `7HUTEPGVACU58`,
	},
	march21: {
		id: "mar21-1",
		date: {
			month: "marzo",
			year: 2021,
		},
		songs: [
			{
				id: "mar21-g1-s1",
				artists: ["Issam Alnajjar"],
				title: "Hadal Ahbek",
				remixArtists: ["Alien Cut"],
				link: "",
			},
			{
				id: "mar21-g1-s2",
				artists: ["Alien Cut"],
				title: "Pink Panther",
				remixArtists: [],
				link: "",
			},
			{
				id: "mar21-g1-s3",
				artists: ["Gigi D'Agostino", "Vize", "Emotik"],
				title: "Never be lonely",
				remixArtists: ["Alien Cut"],
				link: "",
			},
		],
		paypalCode: `ESZZVRVG69MXN`,
	},
	april21: {
		id: "apr21-1",
		date: {
			month: "aprile",
			year: 2021,
		},
		songs: [
			{
				id: "apr21-g1-s1",
				artists: ["Mace", "Ernia", "Samurai Jay"],
				title: "Sirena",
				remixArtists: ["Alien Cut"],
				link: "",
			},
			{
				id: "apr21-g1-s2",
				artists: ["Loredana Bertè"],
				title: "Figlia di...",
				remixArtists: ["Alien Cut"],
				link: "",
			},
			{
				id: "apr21-g1-s3",
				artists: ["Colapesce", "Dimartino"],
				title: "Musica leggerissima",
				remixArtists: ["Alien Cut"],
				link: "",
			},
		],
		paypalCode: `V4P5529NP8CMU`,
	},
	may21: {
		id: "may-1",
		date: {
			month: "maggio",
			year: 2021,
		},
		songs: [
			{
				id: "may21-g1-s1",
				artists: ["Ava Max "],
				title: "My Head & My Heart",
				remixArtists: ["Alien Cut"],
				link: "",
			},
			{
				id: "may21-g1-s2",
				artists: ["Alvaro Soler"],
				title: "Magia",
				remixArtists: ["Alien Cut"],
				link: "",
			},
			{
				id: "may21-g1-s3",
				artists: ["Alien Cut", "Marta"],
				title: "Isacco",
				remixArtists: [],
				link: "",
			},
		],
		paypalCode: `ETVK88PP7MXE8`,
	},
	june21: {
		id: "june-1",
		date: {
			month: "giugno",
			year: 2021,
		},
		songs: [
			{
				id: "june21-g1-s1",
				artists: ["Marnik"],
				title: "Up & Down",
				remixArtists: ["Alien Cut"],
				link: "",
			},
			{
				id: "june21-g1-s2",
				artists: ["Little Sis Nora"],
				title: "MDMA",
				remixArtists: ["Alien Cut"],
				link: "",
			},
			{
				id: "june21-g1-s3",
				artists: ["Sangiovanni"],
				title: "Malibu",
				remixArtists: ["Alien Cut"],
				link: "",
			},
		],
		paypalCode: `UHE8VERWM7U7L`,
	},
	july21: {
		id: "july-1",
		date: {
			month: "luglio",
			year: 2021,
		},
		songs: [
			{
				id: "july21-g1-s1",
				artists: ["Ed Sheeran"],
				title: "Bad Habits",
				remixArtists: ["Alien Cut"],
				link: "",
			},
			{
				id: "july21-g1-s2",
				artists: ["G Bit"],
				title: "Tapirulan",
				remixArtists: ["Alien Cut"],
				link: "",
			},
			{
				id: "july21-g1-s3",
				artists: ["Deorro"],
				title: "Andele",
				remixArtists: ["Alien Cut"],
				link: "",
			},
		],
		paypalCode: `T5W2ZUY2F8HS6`,
	},
	august21: {
		id: "august-1",
		date: {
			month: "agosto",
			year: 2021,
		},
		songs: [
			{
				id: "august21-g1-s1",
				artists: ["Rosa Chemical, Guè Pequeno, Ernia"],
				title: "Polka 2",
				remixArtists: ["Alien Cut"],
				link: "",
			},
			{
				id: "august21-g1-s2",
				artists: ["Robert Natus, Arkus P"],
				title: "Hardcore Salsa",
				remixArtists: ["Alien Cut"],
				link: "",
			},
			{
				id: "august21-g1-s3",
				artists: ["Alle Farben"],
				title: "Bad Ideas",
				remixArtists: ["Alien Cut"],
				link: "",
			},
		],
		paypalCode: `WAY46C2GFGB8S`,
	},
	september21: {
		id: "september-1",
		date: {
			month: "settembre",
			year: 2021,
		},
		songs: [
			{
				id: "september21-g1-s1",
				artists: ["Il Tre"],
				title: "Apollo 13",
				remixArtists: ["Alien Cut"],
				link: "",
			},
			{
				id: "september21-g1-s2",
				artists: ["Parov Stelar"],
				title: "Mama Talking",
				remixArtists: ["Alien Cut"],
				link: "",
			},
			{
				id: "september21-g1-s3",
				artists: ["My Sun and Stars"],
				title: "Change The World",
				remixArtists: ["Alien Cut"],
				link: "",
			},
		],
		paypalCode: `M4CMQRPL775ZE`,
	},
	october21: {
		id: "october-1",
		date: {
			month: "ottobre",
			year: 2021,
		},
		songs: [
			{
				id: "october21-g1-s1",
				artists: ["Club House"],
				title: "Speed Of Sound",
				remixArtists: ["Alien Cut"],
				link: "",
			},
			{
				id: "october21-g1-s2",
				artists: ["Jason Derulo"],
				title: "Take Me Dancing",
				remixArtists: ["Alien Cut"],
				link: "",
			},
			{
				id: "october21-g1-s3",
				artists: ["Gigi D'Agostino"],
				title: "Amorelettronico",
				remixArtists: ["Alien Cut"],
				link: "",
			},
		],
		paypalCode: `ZNM8US98U5H2C`,
	},
	november21: {
		id: "november-1",
		date: {
			month: "novembre",
			year: 2021,
		},
		songs: [
			{
				id: "november21-g1-s1",
				artists: ["Jason Derulo"],
				title: "Acapulco",
				remixArtists: ["Alien Cut"],
				link: "",
			},
			{
				id: "november21-g1-s2",
				artists: ["Italobrothers"],
				title: "Daydream",
				remixArtists: ["Alien Cut"],
				link: "",
			},
			{
				id: "november21-g1-s3",
				artists: ["Freddy Mercury"],
				title: "Living on my own",
				remixArtists: ["Alien Cut"],
				link: "",
			},
		],
		paypalCode: `WNGGGV94AU3QW`,
	},
	december21: {
		id: "december-1",
		date: {
			month: "dicembre",
			year: 2021,
		},
		songs: [
			{
				id: "december21-g1-s1",
				artists: ["Rauw Alejandro"],
				title: "Todo de ti",
				remixArtists: ["Alien Cut"],
				link: "",
			},
			{
				id: "december21-g1-s2",
				artists: ["Chiello, Shalbo"],
				title: "Quanto ti vorrei",
				remixArtists: ["Alien Cut"],
				link: "",
			},
			{
				id: "december21-g1-s3",
				artists: ["Floorfilla"],
				title: "Anthem #2",
				remixArtists: ["Alien Cut"],
				link: "",
			},
		],
		paypalCode: `BG2PGS3JXXDB4`,
	},
	january22: {
		id: "january-1",
		date: {
			month: "Gennaio",
			year: 2022,
		},
		songs: [
			{
				id: "january22-g1-s1",
				artists: ["Albe"],
				title: "Millevoci",
				remixArtists: ["Alien Cut"],
				link: "",
			},
			{
				id: "january22-g1-s2",
				artists: ["Rkomi, Elodie"],
				title: "La coda del diavolo",
				remixArtists: ["Alien Cut"],
				link: "",
			},
			{
				id: "january22-g1-s3",
				artists: ["Alien Cut"],
				title: "The mountain king",
				remixArtists: ["Alien Cut"],
				link: "",
			},
		],
		paypalCode: `4Q5QBGH4RNVQL`,
	},
};

const TRACKS_DATA_LIMIT = 20;

const parent = document.querySelector("#alien-tracklist");

function trackCheckout(trackInfo) {
	console.log();
	const {
		paypalCode,
		songs,
		date: { month, year },
	} = trackInfo;
	let tracks = "";
	songs.forEach((song) => {
		const { title, artists, remixArtists } = song;
		tracks += `<div class="track-container">
			<span class="small-text track">${artists.join(", ")} - ${title} ${
			remixArtists.length ? `(${remixArtists.join(", ")} Rmx)` : ""
		}</span>
			</div>`;
	});
	const checkoutConfirmMessage = `
		<div class="card-column">
			<div class="conditions">
				<p class="medium-text accent-text">
					Pacchetto tracce
				</p>
				<span style="text-transform: capitalize" class="big-text">
					${month} 
					<span class="big-text secondary-text-color">${year}</span>
				</span>
				<p class="big-text">
					€30
				</p>
			</div>
		</div>
		<div class="card-column">
			<p class="xs-text secondary-text-color">
				Contiene:
			</p>
			${tracks}
		</div>
		<form action="https://www.paypal.com/cgi-bin/webscr" method="post" rel="noreferrer" target="_blank">
			<input type="hidden" name="cmd" value="_s-xclick">
			<input type="hidden" id="keyholder" name="hosted_button_id" value=${paypalCode}>
			<div style="margin: 2rem auto; max-width: 60%; align-items: center" class="cta-button pulse">
			<span style="width: 20%; max-width: 50px">
				<img src="./assets/img/icon/paypal.png" alt="Paypal icon" />
			</span>
			<span class="medium-text">
				Paga con PayPal
			</span>
				<button style="width: 100%; height: 100%; opacity:0; top: 0; left: 0; right: 0; position: absolute;z-index: 999; cursor:pointer; margin: 0" type="submit" name="submit">
				</button>
			</div>
			<div class="conditions xs-text"> Condizioni:
				<div class="condition">
					<input type="checkbox" required id="conditions-ticket-reception">  
					<label class=" xs-text secondary-text-color" for="conditions-ticket-reception"> Riceverai le tracce del pacchetto selezionato sull'email del tuo account Paypal <span class="xs-text accent-text">entro DUE giorni</span> dal completamento del pagamento.</label>
				</div>
		</form>
`;

	// `<div style="border: 2px solid var(--main-color)" class="vertical-card ticket-details">
	// 	<div class="card-column" style="
	// 		align-items: flex-end;
	// 		flex-direction: row;
	// 		justify-content: space-between;
	// 		width: 100%;">
	// 		<div class="conditions">
	// 			<span class="medium-text">
	// 				Pacchetto tracce ${Month} ${year}
	// 				</span>
	// 		<p class=" big-text">
	// 			€15
	// 		</p>
	// 	</div>
	// </div>
	// 	`;

	openModal(checkoutConfirmMessage);
}

function tracksPackageCardTemplate(trackInfo) {
	const month = trackInfo.date.month;
	const year = trackInfo.date.year;
	const songs = trackInfo.songs;
	const paypalCode = trackInfo.paypalCode;
	let tracksListHtml = "";
	const tracksPackPurchaseButton = document.createElement("button");
	tracksPackPurchaseButton.classList.add("cta-button", "pulse");
	tracksPackPurchaseButton.textContent = "Acquista pacchetto - 30€";

	tracksPackPurchaseButton.onclick = () => trackCheckout(trackInfo);
	songs.forEach((song) => {
		const { title, artists, remixArtists } = song;
		tracksListHtml += `<div class="track-container">
      <span class="small-text track">${artists.join(", ")} - ${title} ${
			remixArtists.length ? `(${remixArtists.join(", ")} Rmx)` : ""
		}</span>
      </div>`;
	});

	const trackNodeElement = document.createElement("div");
	trackNodeElement.classList.add("vertical-card");

	trackNodeElement.innerHTML = `
    	<div class="card-column main-detail">
    	<p class="big-text text-underline">${month}</p>
    	<p class="medium-text secondary-text-color">${year}</p>
			</div>
			<div class="card-column">
			${tracksListHtml}
			<div class="trackspack-purchase-btn-container"></div>
			</div>
    `;
	const trackspackButtonContainer = trackNodeElement.querySelector(
		".trackspack-purchase-btn-container"
	);
	trackspackButtonContainer.appendChild(tracksPackPurchaseButton);

	return trackNodeElement;
}

Object.keys(remixesData)
	.slice(-TRACKS_DATA_LIMIT)
	.forEach((remix) => {
		parent.appendChild(tracksPackageCardTemplate(remixesData[remix]));
	});
